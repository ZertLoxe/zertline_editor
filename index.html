<!DOCTYPE html>
<html>
<head>
    <title>Dropbox Access Token Generator</title>
</head>
<body>
    <h1>Dropbox Access Token Generator</h1>
    <p>Click the link below to generate a Dropbox access token:</p>
    <a href="#" id="generateTokenLink">Generate Token</a>

    <script>
        // Replace with your Dropbox app's client ID and redirect URI
        const clientId = 'hs2pnr348r68qex';
        const redirectUri = 'https://zertloxe.github.io/zertline_editor/index.html';
        let newWindow;

        document.getElementById('generateTokenLink').addEventListener('click', () => {
            const authUrl = `https://www.dropbox.com/oauth2/authorize?client_id=${clientId}&response_type=token&redirect_uri=${redirectUri}`;
            newWindow = window.open(authUrl, '_blank');
            if (!newWindow) {
                alert('Please allow pop-ups to proceed.');
            }
        });

        // Function to capture the URL of the new window
        function captureURL() {
            if (newWindow) {
                const newWindowURL = newWindow.location.href;
                console.log('URL of the new window:', newWindowURL);
            }
        }

        // Check for URL changes in the new window periodically (or use an event listener for more efficient handling)
        setInterval(captureURL, 3000); // Check every second
    </script>
</body>
</html>
